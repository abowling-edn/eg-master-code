(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"1xse":function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=function(){return function(){}}(),r=t("pMnS"),i=t("9AJC"),o=t("gIcY"),s=t("Ip0R"),a=t("dix8"),c=t("ufrD"),b=t("WZ78"),f=t("ayJW"),p=t("ZYjt"),d=t("6rhm"),h=t("36iw"),g=t("4GxJ"),m=t("gBxT"),v=t("wVJ/"),y=t("8PDw"),w=t("OXuP"),k=t("cm5s"),O=t("wN9v"),x=t("Osig"),I=t("EQDH"),C=function(){function n(n,l,t,e,u,r,i,o){var s=this;this.router=n,this.route=l,this.evt=t,this.net=e,this.store=u,this.auth=r,this.org=i,this.perm=o,this.workstations=[],this.orgOnChange=function(n){s.newOwner=n}}return n.prototype.ngOnInit=function(){var n=this;this.workstations=this.store.getLocalItem("eg.workstation.all")||[],this.defaultName=this.store.getLocalItem("eg.workstation.default"),this.selectedName=this.auth.workstation()||this.defaultName;var l=this.route.snapshot.paramMap.get("remove");l&&this.removeSelected(this.removeWorkstation=l),this.perm.hasWorkPermAt(["REGISTER_WORKSTATION"],!0).then(function(l){n.disableOrgs=n.org.filterList({canHaveUsers:!1},!0).concat(n.org.filterList({notInList:l.REGISTER_WORKSTATION},!0))})},n.prototype.selected=function(){var n=this;return this.workstations.filter(function(l){return l.name===n.selectedName})[0]},n.prototype.useNow=function(){this.selected()&&this.router.navigate(["/staff/login"],{queryParams:{workstation:this.selected().name}})},n.prototype.setDefault=function(){this.selected()&&(this.defaultName=this.selected().name,this.store.setLocalItem("eg.workstation.default",this.defaultName))},n.prototype.removeSelected=function(n){n||(n=this.selected().name),this.workstations=this.workstations.filter(function(l){return l.name!==n}),this.store.setLocalItem("eg.workstation.all",this.workstations),this.defaultName===n&&(this.defaultName=null,this.store.removeLocalItem("eg.workstation.default"))},n.prototype.canDeleteSelected=function(){return!0},n.prototype.registerWorkstation=function(){var n=this;console.log('Registering new workstation "'+this.newName+'" at '+this.newOwner.shortname()),this.newName=this.newOwner.shortname()+"-"+this.newName,this.registerWorkstationApi().then(function(l){return n.registerWorkstationLocal(l)},function(n){return console.log("Workstation registration canceled/failed")})},n.prototype.handleCollision=function(){var n=this;return new Promise(function(l,t){n.wsExistsDialog.open().subscribe(function(e){e&&n.registerWorkstationApi(!0).then(function(n){return l(n)},function(n){return t(n)})})})},n.prototype.registerWorkstationApi=function(n){var l=this,t="open-ils.actor.workstation.register";return n&&(t+=".override"),new Promise(function(n,e){l.net.request("open-ils.actor",t,l.auth.token(),l.newName,l.newOwner.id()).subscribe(function(t){var u=l.evt.parse(t);u?"WORKSTATION_NAME_EXISTS"===u.textcode?l.handleCollision().then(function(l){return n(l)},function(n){return e(n)}):(console.error("Registration failed "+u),e()):n(t)})})},n.prototype.registerWorkstationLocal=function(n){var l={id:n,name:this.newName,owning_lib:this.newOwner.id()};this.workstations.push(l),this.store.setLocalItem("eg.workstation.all",this.workstations),this.newName="",1===this.workstations.length&&(this.selectedName=l.name,this.setDefault())},n}(),B=t("ZYCi"),P=e.pb({encapsulation:2,styles:[],data:{}});function T(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"div",[["class","alert alert-warning"]],null,null,null,null,null)),(n()(),e.Jb(1,null,[" Workstation "," is no longer valid. Removing registration. "]))],null,function(n,l){n(l,1,0,l.component.removeWorkstation)})}function D(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(-1,null,["Please register a workstation."]))],null,null)}function N(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(1,null,[" "," (Default) "]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.name)})}function L(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.name)})}function z(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,6,"option",[],null,null,null,null,null)),e.qb(1,147456,null,0,o.t,[e.k,e.E,[2,o.x]],{value:[0,"value"]},null),e.qb(2,147456,null,0,o.F,[e.k,e.E,[8,null]],{value:[0,"value"]},null),(n()(),e.ib(16777216,null,null,1,null,N)),e.qb(4,16384,null,0,s.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,L)),e.qb(6,16384,null,0,s.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,1,0,e.tb(1,"",l.context.$implicit.name,"")),n(l,2,0,e.tb(1,"",l.context.$implicit.name,"")),n(l,4,0,l.context.$implicit.name==t.defaultName),n(l,6,0,l.context.$implicit.name!=t.defaultName)},null)}function q(n){return e.Lb(0,[e.Hb(402653184,1,{wsExistsDialog:0}),(n()(),e.rb(1,0,null,null,1,"eg-staff-banner",[["bannerText","Workstation Administration"]],null,null,null,a.b,a.a)),e.qb(2,49152,null,0,c.a,[],{bannerText:[0,"bannerText"]},null),(n()(),e.rb(3,0,null,null,1,"eg-title",[["prefix","Manage Workstations"]],null,null,null,b.b,b.a)),e.qb(4,4243456,null,0,f.a,[p.h],{prefix:[0,"prefix"]},null),(n()(),e.rb(5,0,null,null,1,"eg-confirm-dialog",[["dialogTitle","Workstation Exists"]],null,null,null,d.b,d.a)),e.qb(6,114688,[[1,4],["workstationExistsDialog",4]],0,h.a,[g.B],{dialogTitle:[0,"dialogTitle"],dialogBody:[1,"dialogBody"]},null),(n()(),e.rb(7,0,null,null,46,"div",[["class","row"]],null,null,null,null,null)),(n()(),e.rb(8,0,null,null,45,"div",[["class","col-lg-8 offset-1 mt-3"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,T)),e.qb(10,16384,null,0,s.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,D)),e.qb(12,16384,null,0,s.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(13,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(n()(),e.rb(14,0,null,null,1,"div",[["class","col"]],null,null,null,null,null)),(n()(),e.Jb(-1,null,["Register a New Workstation For This Browser"])),(n()(),e.rb(16,0,null,null,15,"div",[["class","row mt-2"]],null,null,null,null,null)),(n()(),e.rb(17,0,null,null,2,"div",[["class","col-lg-2"]],null,null,null,null,null)),(n()(),e.rb(18,0,null,null,1,"eg-org-select",[["placeholder","Owner..."]],null,[[null,"onChange"]],function(n,l,t){var e=!0;return"onChange"===l&&(e=!1!==n.component.orgOnChange(t)&&e),e},m.b,m.a)),e.qb(19,114688,null,0,v.a,[y.a,w.a,k.a,O.a],{placeholder:[0,"placeholder"],applyDefault:[1,"applyDefault"],hideOrgs:[2,"hideOrgs"],disableOrgs:[3,"disableOrgs"]},{onChange:"onChange"}),(n()(),e.rb(20,0,null,null,11,"div",[["class","col-lg-6"]],null,null,null,null,null)),(n()(),e.rb(21,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),e.rb(22,0,null,null,5,"input",[["class","form-control"],["placeholder","Workstation Name..."],["title","Workstation Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,t){var u=!0,r=n.component;return"input"===l&&(u=!1!==e.Bb(n,23)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e.Bb(n,23).onTouched()&&u),"compositionstart"===l&&(u=!1!==e.Bb(n,23)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e.Bb(n,23)._compositionEnd(t.target.value)&&u),"ngModelChange"===l&&(u=!1!==(r.newName=t)&&u),u},null,null)),e.qb(23,16384,null,0,o.d,[e.E,e.k,[2,o.a]],null,null),e.Gb(1024,null,o.n,function(n){return[n]},[o.d]),e.qb(25,671744,null,0,o.s,[[8,null],[8,null],[8,null],[6,o.n]],{model:[0,"model"]},{update:"ngModelChange"}),e.Gb(2048,null,o.o,null,[o.s]),e.qb(27,16384,null,0,o.p,[[4,o.o]],null,null),(n()(),e.rb(28,0,null,null,3,"div",[["class","input-group-btn"]],null,null,null,null,null)),(n()(),e.rb(29,0,null,null,2,"button",[["class","btn btn-outline-dark"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.registerWorkstation()&&e),e},null,null)),(n()(),e.rb(30,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(-1,null,["Register"])),(n()(),e.rb(32,0,null,null,3,"div",[["class","row mt-3 pt-3 border border-left-0 border-right-0 border-bottom-0 border-light"]],null,null,null,null,null)),(n()(),e.rb(33,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(n()(),e.rb(34,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(-1,null,["Workstations Registered With This Browser"])),(n()(),e.rb(36,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(n()(),e.rb(37,0,null,null,8,"div",[["class","col-lg-8"]],null,null,null,null,null)),(n()(),e.rb(38,0,null,null,7,"select",[["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(n,l,t){var u=!0,r=n.component;return"change"===l&&(u=!1!==e.Bb(n,39).onChange(t.target.value)&&u),"blur"===l&&(u=!1!==e.Bb(n,39).onTouched()&&u),"ngModelChange"===l&&(u=!1!==(r.selectedName=t)&&u),u},null,null)),e.qb(39,16384,null,0,o.x,[e.E,e.k],null,null),e.Gb(1024,null,o.n,function(n){return[n]},[o.x]),e.qb(41,671744,null,0,o.s,[[8,null],[8,null],[8,null],[6,o.n]],{model:[0,"model"]},{update:"ngModelChange"}),e.Gb(2048,null,o.o,null,[o.s]),e.qb(43,16384,null,0,o.p,[[4,o.o]],null,null),(n()(),e.ib(16777216,null,null,1,null,z)),e.qb(45,278528,null,0,s.o,[e.P,e.M,e.t],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(46,0,null,null,7,"div",[["class","row mt-2"]],null,null,null,null,null)),(n()(),e.rb(47,0,null,null,6,"div",[["class","col-lg-6"]],null,null,null,null,null)),(n()(),e.rb(48,0,null,null,1,"button",[["class","btn btn-success"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.useNow()&&e),e},null,null)),(n()(),e.Jb(-1,null,[" Use Now "])),(n()(),e.rb(50,0,null,null,1,"button",[["class","btn btn-outline-dark"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.setDefault()&&e),e},null,null)),(n()(),e.Jb(-1,null,[" Mark As Default "])),(n()(),e.rb(52,0,null,null,1,"button",[["class","btn btn-danger"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.removeSelected()&&e),e},null,null)),(n()(),e.Jb(-1,null,[" Remove "]))],function(n,l){var t=l.component;n(l,2,0,"Workstation Administration"),n(l,4,0,"Manage Workstations"),n(l,6,0,"Workstation Exists",e.tb(1,'Workstation "',t.newName,'" already exists.  Use it anyway?')),n(l,10,0,t.removeWorkstation),n(l,12,0,0==t.workstations.length),n(l,19,0,"Owner...",!0,t.hideOrgs,t.disableOrgs),n(l,25,0,t.newName),n(l,41,0,t.selectedName),n(l,45,0,t.workstations)},function(n,l){var t=l.component;n(l,22,0,e.Bb(l,27).ngClassUntouched,e.Bb(l,27).ngClassTouched,e.Bb(l,27).ngClassPristine,e.Bb(l,27).ngClassDirty,e.Bb(l,27).ngClassValid,e.Bb(l,27).ngClassInvalid,e.Bb(l,27).ngClassPending),n(l,29,0,!t.newName||!t.newOwner),n(l,38,0,e.Bb(l,43).ngClassUntouched,e.Bb(l,43).ngClassTouched,e.Bb(l,43).ngClassPristine,e.Bb(l,43).ngClassDirty,e.Bb(l,43).ngClassValid,e.Bb(l,43).ngClassInvalid,e.Bb(l,43).ngClassPending),n(l,48,0,!t.selected),n(l,50,0,!t.selected),n(l,52,0,!t.selected||!t.canDeleteSelected())})}function W(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"ng-component",[],null,null,null,q,P)),e.qb(1,114688,null,0,C,[B.l,B.a,I.a,x.b,w.a,y.a,k.a,O.a],null,null)],function(n,l){n(l,1,0)},null)}var M=e.nb("ng-component",C,W,{},{},[]),J=t("G8BM"),S=t("pKmL"),j=t("9RLy"),E=t("VEwP"),G=t("r2N+"),_=t("ZqI7"),F=t("MZHd"),R=function(){return function(){}}();t.d(l,"ManageWorkstationsModuleNgFactory",function(){return K});var K=e.ob(u,[],function(n){return e.yb([e.zb(512,e.j,e.cb,[[8,[r.a,i.a,i.b,i.p,i.q,i.m,i.n,i.o,M]],[3,e.j],e.y]),e.zb(4608,s.r,s.q,[e.v,[2,s.N]]),e.zb(4608,o.D,o.D,[]),e.zb(4608,o.g,o.g,[]),e.zb(4608,g.B,g.B,[e.j,e.r,g.yb,g.C]),e.zb(4608,s.f,s.f,[e.v]),e.zb(4608,s.d,s.d,[e.v]),e.zb(4608,J.a,J.a,[]),e.zb(1073742336,s.c,s.c,[]),e.zb(1073742336,o.A,o.A,[]),e.zb(1073742336,o.l,o.l,[]),e.zb(1073742336,o.v,o.v,[]),e.zb(1073742336,B.o,B.o,[[2,B.u],[2,B.l]]),e.zb(1073742336,g.c,g.c,[]),e.zb(1073742336,g.f,g.f,[]),e.zb(1073742336,g.g,g.g,[]),e.zb(1073742336,g.k,g.k,[]),e.zb(1073742336,g.l,g.l,[]),e.zb(1073742336,g.s,g.s,[]),e.zb(1073742336,g.x,g.x,[]),e.zb(1073742336,g.D,g.D,[]),e.zb(1073742336,g.H,g.H,[]),e.zb(1073742336,g.O,g.O,[]),e.zb(1073742336,g.R,g.R,[]),e.zb(1073742336,g.U,g.U,[]),e.zb(1073742336,g.ab,g.ab,[]),e.zb(1073742336,g.eb,g.eb,[]),e.zb(1073742336,g.hb,g.hb,[]),e.zb(1073742336,g.kb,g.kb,[]),e.zb(1073742336,g.E,g.E,[]),e.zb(1073742336,S.a,S.a,[]),e.zb(1073742336,j.a,j.a,[]),e.zb(1073742336,E.a,E.a,[]),e.zb(1073742336,G.a,G.a,[]),e.zb(1073742336,_.a,_.a,[]),e.zb(1073742336,F.a,F.a,[]),e.zb(1073742336,R,R,[]),e.zb(1073742336,u,u,[]),e.zb(1024,B.j,function(){return[[{path:"manage",component:C},{path:"remove/:remove",component:C}]]},[])])})},"36iw":function(n,l,t){"use strict";t.d(l,"a",function(){return u});var e=t("mrSG"),u=function(n){function l(){return null!==n&&n.apply(this,arguments)||this}return Object(e.c)(l,n),l}(t("rRT/").a)},"531C":function(n,l,t){"use strict";t.d(l,"a",function(){return e}),t("OsfI");var e=function(){function n(n){this.store=n,this.urlCache={}}return n.prototype.play=function(n){n&&this.playUrl(n,n)},n.prototype.playUrl=function(n,l){var t=this;this.store.getItem("eg.audio.disable").then(function(e){if(!e){var u=t.urlCache[n]||"/audio/notifications/"+n.replace(/\./g,"/")+".wav",r=new Audio(u);r.onloadeddata=function(){t.urlCache[l]=u,r.play(),console.debug("audio: "+u)},t.urlCache[n]||(r.onerror=function(){n.match(/\./)?(n=n.replace(/\.[^\.]+$/,""),t.playUrl(n,l)):console.warn('No suitable URL found for path "'+l+'"')})}})},n}()},"6rhm":function(n,l,t){"use strict";t.d(l,"a",function(){return r}),t.d(l,"b",function(){return c});var e=t("CcnG"),u=t("Ip0R"),r=(t("36iw"),t("4GxJ"),e.pb({encapsulation:2,styles:[],data:{}}));function i(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e.Jb(2,null,["",""]))],null,function(n,l){n(l,2,0,l.component.dialogBody)})}function o(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function s(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,o)),e.qb(2,540672,null,0,u.y,[e.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(n()(),e.ib(0,null,null,0))],function(n,l){n(l,2,0,l.component.dialogBodyTemplate)},null)}function a(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,5,"div",[["class","modal-header bg-info"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(n()(),e.Jb(2,null,["",""])),(n()(),e.rb(3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.close()&&e),e},null,null)),(n()(),e.rb(4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(n()(),e.Jb(-1,null,["\xd7"])),(n()(),e.rb(6,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,i)),e.qb(8,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,s)),e.qb(10,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(11,0,null,null,4,"div",[["class","modal-footer"]],null,null,null,null,null)),(n()(),e.rb(12,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.close(!0)&&e),e},null,null)),(n()(),e.Jb(-1,null,["Confirm"])),(n()(),e.rb(14,0,null,null,1,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.close(!1)&&e),e},null,null)),(n()(),e.Jb(-1,null,["Cancel"]))],function(n,l){var t=l.component;n(l,8,0,!t.dialogBodyTemplate),n(l,10,0,t.dialogBodyTemplate)},function(n,l){n(l,2,0,l.component.dialogTitle)})}function c(n){return e.Lb(0,[e.Hb(402653184,1,{dialogContent:0}),(n()(),e.ib(0,[[1,2],["dialogContent",2]],null,0,null,a))],null,null)}},Gi3i:function(n,l,t){"use strict";t.d(l,"a",function(){return i});var e=t("mrSG"),u=t("FFOo"),r=t("T1DM");function i(n,l){return void 0===l&&(l=r.a),function(t){return t.lift(new o(n,l))}}var o=function(){function n(n,l){this.dueTime=n,this.scheduler=l}return n.prototype.call=function(n,l){return l.subscribe(new s(n,this.dueTime,this.scheduler))},n}(),s=function(n){function l(l,t,e){var u=n.call(this,l)||this;return u.dueTime=t,u.scheduler=e,u.debouncedSubscription=null,u.lastValue=null,u.hasValue=!1,u}return e.c(l,n),l.prototype._next=function(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(a,this.dueTime,this))},l.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},l.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var n=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}},l.prototype.clearDebounce=function(){var n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)},l}(u.a);function a(n){n.debouncedNext()}},MZHd:function(n,l,t){"use strict";t.d(l,"a",function(){return r});var e=t("531C"),u=t("XFKz"),r=function(){function n(){}return n.forRoot=function(){return{ngModule:n,providers:[u.a,e.a]}},n}()},TYK5:function(n,l,t){"use strict";t.d(l,"a",function(){return u});var e=t("p0ib");function u(){for(var n=[],l=0;l<arguments.length;l++)n[l]=arguments[l];return function(l){return l.lift.call(e.a.apply(void 0,[l].concat(n)))}}},WZ78:function(n,l,t){"use strict";t.d(l,"a",function(){return s}),t.d(l,"b",function(){return h});var e=t("CcnG"),u=t("Ip0R"),r=t("StZw"),i=t("tNQm"),o=t("G8BM"),s=(t("ayJW"),t("ZYjt"),e.pb({encapsulation:2,styles:[],data:{}}));function a(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),e.rb(1,0,null,null,2,null,null,null,null,null,null,null)),(n()(),e.Jb(2,null,[""," - "])),e.Db(0,u.B,[])],null,function(n,l){n(l,2,0,e.Kb(l,2,0,e.Bb(l,3).transform(l.parent.parent.context.pfx,0,12)))})}function c(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),e.Jb(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.pfx)})}function b(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,a)),e.qb(2,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,c)),e.qb(4,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(0,null,null,0))],function(n,l){n(l,2,0,l.parent.context.sfx),n(l,4,0,!l.parent.context.sfx)},null)}function f(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),e.Jb(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.sfx)})}function p(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),e.Jb(-1,null,["Evergreen"]))],null,null)}function d(n){return e.Lb(0,[(n()(),e.ib(16777216,null,null,1,null,b)),e.qb(1,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,f)),e.qb(3,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,p)),e.qb(5,16384,null,0,u.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(0,null,null,0))],function(n,l){n(l,1,0,l.context.pfx),n(l,3,0,l.context.sfx),n(l,5,0,!l.context.pfx&&!l.context.sfx)},null)}function h(n){return e.Lb(0,[e.Hb(402653184,1,{titleString:0}),(n()(),e.ib(0,[["titleStringTmpl",2]],null,0,null,d)),(n()(),e.rb(2,0,null,null,1,"eg-string",[],null,null,null,r.b,r.a)),e.qb(3,114688,[[1,4],["titleString",4]],0,i.a,[e.k,o.a],{template:[0,"template"]},null)],function(n,l){n(l,3,0,e.Bb(l,1))},null)}},XFKz:function(n,l,t){"use strict";t.d(l,"a",function(){return e});var e=function(){function n(){this.assignments=[]}return n.prototype.assign=function(n){var l=[];this.assignments.forEach(function(t){if(t.key===n.key){if(t.ctx===n.ctx)return;t.shadowed=!0}l.unshift(t)}),l.unshift(n),this.assignments=l},n.prototype.compressKeys=function(n){if(!n.key)return null;var l="";return(n.ctrlKey||n.metaKey)&&(l+="ctrl+"),n.altKey&&(l+="alt+"),n.shiftKey&&(l+="shift+"),l+n.key.toLowerCase()},n.prototype.fire=function(n){var l=this.compressKeys(n);for(var t in this.assignments)if(l===this.assignments[t].key){var e=this.assignments[t];return console.debug("AccessKey assignment found for "+e.key),setTimeout(e.action,0),void n.preventDefault()}},n.prototype.infoIze=function(){return this.assignments.map(function(n){return{key:n.key,desc:n.desc,ctx:n.ctx}})},n}()},ZqI7:function(n,l,t){"use strict";t.d(l,"a",function(){return e});var e=function(){return function(){}}()},aGNc:function(n,l,t){"use strict";t.d(l,"a",function(){return r});var e=t("mrSG"),u=t("FFOo");function r(n){return function(l){return l.lift(new i(n))}}var i=function(){function n(n){this.value=n}return n.prototype.call=function(n,l){return l.subscribe(new o(n,this.value))},n}(),o=function(n){function l(l,t){var e=n.call(this,l)||this;return e.value=t,e}return e.c(l,n),l.prototype._next=function(n){this.destination.next(this.value)},l}(u.a)},ad02:function(n,l,t){"use strict";t.d(l,"a",function(){return r});var e=t("mrSG"),u=t("FFOo");function r(n,l){return function(t){return t.lift(new i(n,l))}}var i=function(){function n(n,l){this.compare=n,this.keySelector=l}return n.prototype.call=function(n,l){return l.subscribe(new o(n,this.compare,this.keySelector))},n}(),o=function(n){function l(l,t,e){var u=n.call(this,l)||this;return u.keySelector=e,u.hasKey=!1,"function"==typeof t&&(u.compare=t),u}return e.c(l,n),l.prototype.compare=function(n,l){return n===l},l.prototype._next=function(n){var l;try{var t=this.keySelector;l=t?t(n):n}catch(u){return this.destination.error(u)}var e=!1;if(this.hasKey)try{e=(0,this.compare)(this.key,l)}catch(u){return this.destination.error(u)}else this.hasKey=!0;e||(this.key=l,this.destination.next(n))},l}(u.a)},ayJW:function(n,l,t){"use strict";t.d(l,"a",function(){return e}),t("tNQm");var e=function(){function n(n){this.title=n}return Object.defineProperty(n.prototype,"prefix",{set:function(n){this.pfx=n,this.setTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"suffix",{set:function(n){this.sfx=n,this.setTitle()},enumerable:!0,configurable:!0}),n.prototype.ngAfterViewInit=function(){this.initDone=!0,this.setTitle()},n.prototype.setTitle=function(){var n=this;this.initDone&&setTimeout(function(){n.titleString.current({pfx:n.pfx,sfx:n.sfx}).then(function(l){return n.title.setTitle(l)})})},n}()},dix8:function(n,l,t){"use strict";t.d(l,"a",function(){return o}),t.d(l,"b",function(){return s});var e=t("CcnG"),u=t("WZ78"),r=t("ayJW"),i=t("ZYjt"),o=(t("ufrD"),e.pb({encapsulation:2,styles:[],data:{}}));function s(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,4,"div",[["class","lead alert alert-primary text-center pt-1 pb-1"],["role","alert"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"eg-title",[],null,null,null,u.b,u.a)),e.qb(2,4243456,null,0,r.a,[i.h],{prefix:[0,"prefix"]},null),(n()(),e.rb(3,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(4,null,["",""]))],function(n,l){n(l,2,0,l.component.bannerText)},function(n,l){n(l,4,0,l.component.bannerText)})}},gBxT:function(n,l,t){"use strict";t.d(l,"a",function(){return o}),t.d(l,"b",function(){return b});var e=t("CcnG"),u=t("gIcY"),r=t("4GxJ"),i=t("Ip0R"),o=(t("wVJ/"),t("8PDw"),t("OXuP"),t("cm5s"),t("wN9v"),e.pb({encapsulation:2,styles:[],data:{}}));function s(n){return e.Lb(0,[(n()(),e.Jb(0,null,["\n","\n"]))],null,function(n,l){n(l,0,0,l.context.result.label)})}function a(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(2,null,["",""]))],null,function(n,l){n(l,2,0,l.component.selected.label)})}function c(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),e.rb(1,16777216,null,null,6,"input",[["aria-multiline","false"],["autocapitalize","off"],["autocorrect","off"],["class","form-control"],["container","body"],["role","combobox"],["type","text"]],[[1,"id",0],[8,"placeholder",0],[2,"open",null],[8,"autocomplete",0],[1,"aria-autocomplete",0],[1,"aria-activedescendant",0],[1,"aria-owns",0],[1,"aria-expanded",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"selectItem"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keydown"]],function(n,l,t){var u=!0,r=n.component;return"input"===l&&(u=!1!==e.Bb(n,2)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e.Bb(n,2).onTouched()&&u),"compositionstart"===l&&(u=!1!==e.Bb(n,2)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e.Bb(n,2)._compositionEnd(t.target.value)&&u),"blur"===l&&(u=!1!==e.Bb(n,3).handleBlur()&&u),"keydown"===l&&(u=!1!==e.Bb(n,3).handleKeyDown(t)&&u),"ngModelChange"===l&&(u=!1!==(r.selected=t)&&u),"click"===l&&(u=!1!==r.click$.next(t.target.value)&&u),"selectItem"===l&&(u=!1!==r.orgChanged(t)&&u),u},null,null)),e.qb(2,16384,null,0,u.d,[e.E,e.k,[2,u.a]],null,null),e.qb(3,212992,[[1,4],["instance",4]],0,r.ib,[e.k,e.P,e.E,e.r,e.j,r.jb,e.A,r.lb,i.e,e.A,e.h,e.g],{container:[0,"container"],inputFormatter:[1,"inputFormatter"],ngbTypeahead:[2,"ngbTypeahead"],resultTemplate:[3,"resultTemplate"]},{selectItem:"selectItem"}),e.Gb(1024,null,u.n,function(n,l){return[n,l]},[u.d,r.ib]),e.qb(5,671744,null,0,u.s,[[8,null],[8,null],[8,null],[6,u.n]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Gb(2048,null,u.o,null,[u.s]),e.qb(7,16384,null,0,u.p,[[4,u.o]],null,null),(n()(),e.ib(0,null,null,0))],function(n,l){var t=l.component;n(l,3,0,"body",t.formatter,t.filter,e.Bb(l.parent,1)),n(l,5,0,t.disabled,t.selected)},function(n,l){var t=l.component;n(l,1,1,[t.domId.length?t.domId:null,t.placeholder,e.Bb(l,3).isPopupOpen(),e.Bb(l,3).autocomplete,e.Bb(l,3).showHint?"both":"list",e.Bb(l,3).activeDescendant,e.Bb(l,3).isPopupOpen()?e.Bb(l,3).popupId:null,e.Bb(l,3).isPopupOpen(),e.Bb(l,7).ngClassUntouched,e.Bb(l,7).ngClassTouched,e.Bb(l,7).ngClassPristine,e.Bb(l,7).ngClassDirty,e.Bb(l,7).ngClassValid,e.Bb(l,7).ngClassInvalid,e.Bb(l,7).ngClassPending])})}function b(n){return e.Lb(0,[e.Hb(671088640,1,{instance:0}),(n()(),e.ib(0,[["displayTemplate",2]],null,0,null,s)),(n()(),e.ib(16777216,null,null,1,null,a)),e.qb(3,16384,null,0,i.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,c)),e.qb(5,16384,null,0,i.p,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,3,0,t.readOnly&&t.selected),n(l,5,0,!t.readOnly)},null)}},"r2N+":function(n,l,t){"use strict";t.d(l,"a",function(){return e});var e=function(){return function(){}}()},ufrD:function(n,l,t){"use strict";t.d(l,"a",function(){return e});var e=function(){return function(){}}()},wN9v:function(n,l,t){"use strict";t.d(l,"a",function(){return o});var e=t("Osig"),u=t("cm5s"),r=t("8PDw"),i=t("CcnG"),o=function(){function n(n,l,t){this.net=n,this.org=l,this.auth=t}return n.prototype.hasWorkPermAt=function(n,l){var t=this;return this.net.request("open-ils.actor","open-ils.actor.user.has_work_perm_at.batch",this.auth.token(),n).toPromise().then(function(e){var u={};return n.forEach(function(n){var r=[];e[n].forEach(function(n){r=r.concat(t.org.descendants(n,l))}),u[n]=r}),u})},n.prototype.hasWorkPermHere=function(n){n=[].concat(n);var l=+this.auth.user().wsid();return l?this.hasWorkPermAt(n,!0).then(function(n){var t={};return Object.keys(n).forEach(function(e){t[e]=n[e].indexOf(l)>-1}),t}):Promise.reject("hasWorkPermHere requires a workstation")},n.ngInjectableDef=i.T({factory:function(){return new n(i.X(e.b),i.X(u.a),i.X(r.a))},token:n,providedIn:"root"}),n}()},"wVJ/":function(n,l,t){"use strict";t.d(l,"a",function(){return b});var e=t("CcnG"),u=t("K9Ia"),r=t("Gi3i"),i=t("ad02"),o=t("TYK5"),s=t("VnD/"),a=t("aGNc"),c=t("67Y/"),b=(t("8PDw"),t("OXuP"),t("cm5s"),t("wN9v"),function(){function n(n,l,t,b){var f=this;this.auth=n,this.store=l,this.org=t,this.perm=b,this.hidden=[],this.click$=new u.a,this.placeholder="",this.domId="",this.displayField="shortname",this.applyDefault=!1,this.readOnly=!1,this._disabledOrgs=[],this.onChange=new e.m,this.formatter=function(n){return n?n.label.trim():""},this.filter=function(n){return n.pipe(Object(r.a)(200),Object(i.a)(),Object(o.a)(f.click$.pipe(Object(s.a)(function(){return!f.instance.isPopupOpen()})).pipe(Object(a.a)("_CLICK_"))),Object(c.a)(function(n){var l=f.org.list().filter(function(n){return 0===f.hidden.filter(function(l){return n.id()===l}).length});return f.permLimitOrgs&&(l=l.filter(function(n){return f.permLimitOrgs.includes(n.id())})),"_CLICK_"!==n&&(l=l.filter(function(l){return""===n||l[f.displayField]().toLowerCase().indexOf(n.toLowerCase())>-1})),l.map(function(n){return f.formatForDisplay(n)})}))}}return Object.defineProperty(n.prototype,"hideOrgs",{set:function(n){n&&(this.hidden=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"disableOrgs",{set:function(n){n&&(this._disabledOrgs=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialOrg",{set:function(n){n&&(this.startOrg=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialOrgId",{set:function(n){n&&(this.startOrg=this.org.get(n))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"applyOrg",{set:function(n){n&&(this.selected=this.formatForDisplay(n))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"limitPerms",{set:function(n){this.applyPermLimitOrgs(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"applyOrgId",{set:function(n){n&&(this.selected=this.formatForDisplay(this.org.get(n)))},enumerable:!0,configurable:!0}),n.prototype.selectedOrg=function(){return null==this.selected?null:this.org.get(this.selected.id)},n.prototype.ngOnInit=function(){var n=this;!this.startOrg&&this.applyDefault&&this.auth.user()&&(this.startOrg=this.org.get(this.auth.user().ws_ou()),this.selected=this.formatForDisplay(this.org.get(this.auth.user().ws_ou())),setTimeout(function(){return n.onChange.emit(n.startOrg)},0)),this.startOrg&&(this.selected=this.formatForDisplay(this.startOrg))},n.prototype.applyPermLimitOrgs=function(n){var l=this;n&&0!==(n=n.filter(function(n){return null!=n})).length&&this.perm.hasWorkPermAt(n,!0).then(function(n){l.permLimitOrgs=Object.values(n).reduce(function(n,l){return n.concat(l)},[])})},n.prototype.formatForDisplay=function(n){var l=n[this.displayField]();return this.readOnly||(l="\u2007".repeat(n.ou_type().depth())+l),{id:n.id(),label:l,disabled:!1}},n.prototype.orgChanged=function(n){this.onChange.emit(this.org.get(n.item.id))},n.prototype.reset=function(){this.selected=null},n}())}}]);